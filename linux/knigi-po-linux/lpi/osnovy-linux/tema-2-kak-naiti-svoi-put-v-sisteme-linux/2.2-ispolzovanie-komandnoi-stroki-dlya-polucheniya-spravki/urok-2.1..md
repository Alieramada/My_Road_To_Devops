# Урок 2.1.

## Введение

Командная строка - очень сложный инструмент. Каждая команда имеет свои уникальные параметры, поэтому документация является ключевой при работе с системой Linux. Помимо **`/usr/share/doc/`** каталога, в котором хранится большая часть документации, различные другие инструменты предоставляют информацию об использовании команд Linux. Эта глава посвящена методам доступа к этой документации с целью получения справки.

Существует множество методов получения справки в командной строке Linux. **`man`**, **`help`** и **`info`** вот лишь некоторые из них. Что касается Linux Essentials, то мы сосредоточимся на **`man`** и **`info`**, поскольку они являются наиболее часто используемыми инструментами для получения справки.

Другой темой этой главы будет поиск файлов. В основном вы будете работать с командой **`locate`**.

## Получение справки в командной строке

## **Встроенная справка**

При запуске с помощью параметра **`--help`** большинство команд отображают краткие инструкции по их использованию. Хотя не все команды предоставляют этот переключатель, все же это хорошая первая попытка узнать больше о параметрах команды. Имейте в виду, что инструкции из `--help` часто довольно кратки по сравнению с другими источниками документации, которые мы обсудим в оставшейся части этого урока.

## **Справочные страницы**

Большинство команд предоставляют страницу руководства или “справочную” страницу. Эта документация обычно устанавливается вместе с программным обеспечением, и к ней можно получить доступ с помощью команды **`man`**. Команда, справочная страница которой должна отображаться, добавляется к `man` в качестве аргумента:

```sh
$ man mkdir
```

Эта команда открывает справочную страницу для **`mkdir`**. Для навигации по справочной странице можно использовать клавиши со стрелками вверх и вниз или пробел. Чтобы выйти из справочной страницы, нажмите **Q**.

Каждая справочная страница разделена максимум на 11 разделов, хотя многие из этих разделов являются необязательными:

| Раздел      | Описнаие                                    |
| ----------- | ------------------------------------------- |
| NAME        | Название команды и краткое описание         |
| SYNOPSIS    | Описание синтаксиса команды                 |
| DESCRIPTION | Описание эффектов команды                   |
| OPTIONS     | Доступные опции                             |
| ARGUMENTS   | Доступные аргументы                         |
| FILES       | Вспомогательные файлы                       |
| EXAMPLES    | Пример командной строки                     |
| SEE ALSO    | Перекрестные ссылки на соответствующие темы |
| DIAGNOSTICS | Предупреждения и сообщения об ошибках       |
| COPYRIGHT   | Автор(ы) команды                            |
| BUGS        | Все известные ограничения команды           |

На практике большинство справочных страниц содержат не все эти части.

Man страницы разделены на восемь категорий, пронумерованных от 1 до 8:\


| Категория | Описание                            |
| --------- | ----------------------------------- |
| 1         | Пользовательская команда            |
| 2         | Системные вызовы                    |
| 3         | Функции библиотеки C                |
| 4         | Драйверы и файлы устройств          |
| 5         | Файлы конфигурации и форматы файлов |
| 6         | Игры                                |
| 7         | Разное                              |
| 8         | Команды системного администратора   |
| 9         | Функции ядра (нестандартные)        |

Каждая справочная страница относится только к одной категории. Однако несколько категорий могут содержать справочные страницы с одинаковым названием. Давайте возьмем в качестве примера команду **`passwd`**. Эта команда может использоваться для изменения пароля пользователя. Поскольку `passwd` является пользовательской командой, ее справочная страница находится в категории 1. В дополнение к `passwd` команде, файл базы данных паролей `/etc/passwd` также имеет справочную страницу, которая также называется `passwd`. Поскольку этот файл является файлом конфигурации, он относится к категории 5. При ссылке на справочную страницу категория часто добавляется к названию справочной страницы, например, в `passwd(1)` или `passwd(5)` для идентификации соответствующей справочной страницы.\


По умолчанию `man passwd` отображает первую доступную справочную страницу, в данном случае `passwd(1)`. Категория нужной справочной страницы может быть указана в команде, например `man 1 passwd` или `man 5 passwd`.

Мы уже обсуждали, как перемещаться по странице руководства и как вернуться в командную строку. Внутри `man` используется команда **`less`** для отображения содержимого страницы руководства. `less` позволяет искать текст на странице руководства. Чтобы найти слово `linux`, вы можете просто использовать `/linux` для поиска в прямом направлении с того места, где вы находитесь на странице, или `?linux` для поиска в обратном направлении. Это действие выделяет все подходящие результаты и перемещает страницу к первому выделенному результату. В обоих случаях вы можете ввести N для перехода к следующему совпадению. Чтобы найти дополнительную информацию об этих дополнительных функциях, нажмите H, и отобразится меню со всей информацией.

## **Информационные страницы**

Еще одним инструментом, который поможет вам при работе с системой Linux, являются информационные страницы. Информационные страницы обычно более подробные, чем справочные страницы, и отформатированы в виде гипертекста, аналогично веб-страницам в Интернете.

Информационные страницы могут отображаться следующим образом:

```sh
$ info mkdir
```

Для каждой информационной страницы **`info`** считывает информационный файл, который структурирован в виде отдельных узлов в дереве. Каждый узел содержит простую тему, а команда `info` содержит гиперссылки, которые помогут вам перейти от одного узла к другому. Вы можете перейти по ссылке, нажав **Enter** и наведя курсор на одну из ведущих звёздочек.

Как и в случае с `man`, в инструменте `info` также есть команды для навигации по странице. Вы можете узнать больше об этих командах, нажав ? на информационной странице. Эти инструменты помогут вам легче перемещаться по странице, а также понять, как получить доступ к узлам и перемещаться по дереву узлов.

## **Справочник `/usr/share/doc/`**

Как упоминалось ранее, в каталоге **`/usr/share/doc/`** хранится большая часть документации по командам, которые использует система. Этот каталог содержит каталог для большинства пакетов, установленных в системе. Название каталога обычно совпадает с названием пакета и иногда с его версией. Эти каталоги содержат файл `README` или `readme.txt` с основной документацией по пакету. Помимо файла `README` папка может содержать и другие файлы документации, например журнал изменений, в котором подробно описана история программы, или примеры файлов конфигурации для конкретного пакета.

Информация в файле `README` варьируется от пакета к пакету. Все файлы написаны в виде обычного текста, поэтому их можно читать в любом текстовом редакторе. Точное количество и типы файлов зависят от пакета. Ознакомьтесь с некоторыми каталогами, чтобы получить представление об их содержимом.

## Поиск файлов

Система Linux состоит из множества каталогов и файлов. В Linux есть множество инструментов для поиска конкретного файла в системе. Самый быстрый из них — команда `locate`.

`locate` выполняет поиск в базе данных и затем выводит каждое имя, соответствующее заданной строке

```sh
$ locate note
/lib/udev/keymaps/zepto-znote
/usr/bin/zipnote
/usr/share/doc/initramfs-tools/maintainer-notes.html
/usr/share/man/man1/zipnote.1.gz
```

Команда **`locate`** также поддерживает использование подстановочных знаков и регулярных выражений, поэтому строка поиска не обязательно должна совпадать со всем именем нужного файла. Подробнее о регулярных выражениях вы узнаете в следующей главе.

По умолчанию `locate` ведёт себя так, как если бы шаблон был окружён звёздочками, поэтому `locate PATTERN` — это то же самое, что `locate *PATTERN*`. Это позволяет указывать только подстроки вместо полного имени файла. Вы можете изменить это поведение с помощью различных опций, описанных в справочной странице `locate` man.

Поскольку `locate` выполняется чтение из базы данных, вы можете не найти файл, который вы недавно создали. Базой данных управляет программа с именем **`updatedb`**. Обычно он запускается периодически, но если у вас есть права суперпользователя и вам необходимо немедленное обновление базы данных, вы можете запустить `updatedb` команду самостоятельно в любое время.

## **Команда `find`**

**`find`** это еще один очень популярный инструмент, который используется для поиска файлов. У этой команды другой подход по сравнению с командой `locate`. `find` команда выполняет рекурсивный поиск в дереве каталогов, включая его подкаталоги. `find` выполняет такой поиск при каждом вызове, он не поддерживает подобную базу данных `locate`. Подобно `locate`, `find` также поддерживает подстановочные знаки и регулярные выражения.

`find` требуется указать хотя бы путь, по которому выполняется поиск. Кроме того, можно добавить так называемые выражения, чтобы задать критерии фильтрации для отображения файлов. Например, выражение `-name` ищет файлы с определённым названием:

```sh
~$ cd Downloads
~/Downloads
$ find . -name thesis.pdf
./thesis.pdf
~/Downloads
$ find ~ -name thesis.pdf
/home/carol/Downloads/thesis.pdf
```

Первая команда `find` ищет файл в текущем каталоге `Downloads`, а вторая — в домашнем каталоге пользователя.

## &#x20;Упражнения с руководством

1. Используйте команду `man`, чтобы узнать, что делает каждая команда:

| Команда   | Описание                          |
| --------- | --------------------------------- |
| `ls`      | Отображение содержимого каталога. |
| `cat`     |                                   |
| `cut`     |                                   |
| `cd`      |                                   |
| `cp`      |                                   |
| `mv`      |                                   |
| `mkdir`   |                                   |
| `touch`   |                                   |
| `wc`      |                                   |
| `passwd`  |                                   |
| `rm`      |                                   |
| `rmdir`   |                                   |
| `more`    |                                   |
| `less`    |                                   |
| `whereis` |                                   |
| `head`    |                                   |
| `tail`    |                                   |
| `sort`    |                                   |
| `tr`      |                                   |
| `chmod`   |                                   |
| `grep`    |                                   |



2. Откройте информационную страницу `ls` и выберите `Menu`.

* Какие у вас есть варианты?
* Найдите опцию, которая позволяет сортировать выходные данные по времени изменения.

3. Отобразите путь к первым 3 `README` файлам. Используйте `man` команду, чтобы определить правильный вариант для `locate`.
4. Создайте файл с именем `test` в вашем домашнем каталоге. Найдите его абсолютный путь с помощью `locate` команды.
5. Вы нашли его сразу? Что вам нужно было сделать, чтобы `locate` смог найти его?
6. Найдите тестовый файл, который вы ранее создали, с помощью команды `find`. Какой синтаксис вы использовали и каков абсолютный путь ?

## Исследовательские упражнения <a href="#sec.2.2_01-ee" id="sec.2.2_01-ee"></a>

1. В приведенной выше таблице есть одна команда, у которой нет `man` страницы. Что это за команда и почему вы думаете, что у команды нет справочной страницы?
2. Используя команды из приведенной выше таблицы, создайте следующее древо файлов. Имена, начинающиеся с заглавной буквы, представляют собой каталоги, а те, что написаны строчными буквами, - файлы.

```
User
├── Documents
|   ├──Hello
|   |   ├──hey2
|   |   ├──helloa
|   |   └──ola5
|   └──World
|       └──earth9
├── Downloads
|   ├──Music
|   └──Songs
|       ├──collection1
|       └──collection2
├── Test
|   └── passa
└── test

```

&#x20; 3\. Отобразите на экране текущий рабочий каталог, включая вложенные папки.

&#x20; 4\.  Найдите в древе все файлы, которые заканчиваются цифрой.&#x20;

&#x20; 5\. Удалите все древо каталогов с помощью одной команды.

## Краткие сведения

На этом уроке вы узнали:

* Как получить помощь
* Как использовать команду `man`
* Как перемещаться по `man` странице
* Различные разделы `man` страницы
* Как использовать команду `info`
* Как перемещаться между различными узлами
* Как выполнять поиск файлов в системе

Команды, используемые в упражнениях:

`man`

Отобразить справочную страницу.

`info`

Отобразить информационную страницу.

`locate`

Выполнить поиск в `locate` базе данных файлов с определенным именем.

`find`

Выполнить поиск в файловой системе имен, соответствующих набору критериев выбора.

`updatedb`

Обновить `locate` базу данных.

## &#x20;Ответы на упражнения с руководством

1. Используйте команду `man`, чтобы узнать, что делает каждая команда:

| Команда   | Описание                                                                                      |
| --------- | --------------------------------------------------------------------------------------------- |
| `ls`      | Отображение содержимого каталога.                                                             |
| `cat`     | Объединяет или просматривает текстовые файлы                                                  |
| `cut`     | Удаляет разделы из текстового файла                                                           |
| `cd`      | Перемещение в другой каталог                                                                  |
| `cp`      | Копирует файл                                                                                 |
| `mv`      | Перемещает файл (его также можно использовать для переименования)                             |
| `mkdir`   | Создает новый каталог                                                                         |
| `touch`   | Создаёт файл или изменяет время и дату последнего изменения существующего файла               |
| `wc`      | Подсчитывает количество слов, строк или байтов в файле                                        |
| `passwd`  | Изменение пароля пользователя                                                                 |
| `rm`      | Удаляет файл                                                                                  |
| `rmdir`   | Удаляет каталог                                                                               |
| `more`    | Просмотр текстовых файлов на одном экране за раз                                              |
| `less`    | Просматривает текстовые файлы, позволяет прокручивать строку или страницу вверх и вниз за раз |
| `whereis` | Отображает путь к файлу указанной программе и связанным с ней файлам руководства              |
| `head`    | Отображает несколько первых строк файла                                                       |
| `tail`    | Отображает несколько последних строк файла                                                    |
| `sort`    | Упорядочивает файл в цифровом или алфавитном порядке                                          |
| `tr`      | Переводит или удаляет символы файла                                                           |
| `chmod`   | Изменяет права доступа к файлу                                                                |
| `grep`    | Поиск в файле                                                                                 |

2. Откройте информационную страницу `ls` и выберите Menu.\*

* Какие у вас есть варианты?
  * Какие файлы перечислены
  * Какая информация указана в списке
  * Сортировка выходных данных
  * Подробнее о сортировке версий
  * Общее форматирование выходных данных
  * Форматирование временных меток файлов
  * Форматирование имен файлов
*   Найдите опцию, которая позволяет сортировать выходные данные по времени изменения.

    `-t` или `--sort=time`

3. Отобразите путь к первым 3 `README` файлам. Используйте `man` команду, чтобы определить правильный вариант для `locate`.

```sh
$ locate -l 3 README
/etc/alternatives/README
/etc/init.d/README
/etc/rc0.d/README
```

4. Создайте файл с именем `test` в вашем домашнем каталоге. Найдите его абсолютный путь с помощью команды `locate`

```sh
$ touch test
$ locate test
/home/user/test
```

5. Вы сразу его нашли? Что вам нужно было сделать, чтобы `locate` его найти?

```sh
$ sudo updatedb
```

Файл был создан недавно, поэтому в базе данных нет его записи.

6. Найдите тестовый файл, который вы создали ранее, с помощью команды `find` . Какой синтаксис вы использовали и каков абсолютный путь?

```sh
$ find ~ -name test
```

&#x20;    или

```sh
$ find . -name test
/home/user/test
```

## &#x20;Ответы на исследовательские упражнения

1.  В приведённой выше таблице есть одна команда, у которой нет страницы `man` man. Какая это команда и почему вы считаете, что у неё нет страницы man?

    Команда `cd` не имеет справочной страницы, потому что это встроенная команда оболочки.
2. Используя команды из приведённой выше таблицы, создайте следующее дерево файлов. Названия, начинающиеся с заглавной буквы, обозначают каталоги, а названия, написанные строчными буквами, — файлы.

```
User
├── Documents
|   ├──Hello
|   |   ├──hey2
|   |   ├──helloa
|   |   └──ola5
|   └──World
|       └──earth9
├── Downloads
|   ├──Music
|   └──Songs
|       ├──collection1
|       └──collection2
├── Test
|   └── passa
└── test
```

Решение представляет собой комбинацию команд `mkdir` и `touch`.

3. Отобразите на экране текущий рабочий каталог, включая вложенные папки.

```sh
$ ls -R
```

4. Найдите в дереве все файлы, которые заканчиваются цифрой.

```sh
$ find ~ -name "*[0-9]"
$ locate "*[0-9]"
```

5. Удалите все дерево каталогов с помощью одной команды.

```sh
 rm -r Documents Downloads Test test
```



1. Откройте информационную страницу `ls` и выберите `Menu`.

* Какие у вас есть варианты?
* Найдите опцию, которая позволяет сортировать выходные данные по времени изменения.

3. Отобразите путь к первым 3 `README` файлам. Используйте `man` команду, чтобы определить правильный вариант для `locate`.
4. Создайте файл с именем `test` в вашем домашнем каталоге. Найдите его абсолютный путь с помощью `locate` команды.
5. Вы нашли его сразу? Что вам нужно было сделать, чтобы `locate` смог найти его?
6. Найдите тестовый файл, который вы ранее создали, с помощью команды `find`. Какой синтаксис вы использовали и каков абсолютный путь ?

## Исследовательские упражнения <a href="#sec.2.2_01-ee" id="sec.2.2_01-ee"></a>

1. В приведенной выше таблице есть одна команда, у которой нет `man` страницы. Что это за команда и почему вы думаете, что у команды нет справочной страницы?
2. Используя команды из приведенной выше таблицы, создайте следующее древо файлов. Имена, начинающиеся с заглавной буквы, представляют собой каталоги, а те, что написаны строчными буквами, - файлы.

```
User
├── Documents
|   ├──Hello
|   |   ├──hey2
|   |   ├──helloa
|   |   └──ola5
|   └──World
|       └──earth9
├── Downloads
|   ├──Music
|   └──Songs
|       ├──collection1
|       └──collection2
├── Test
|   └── passa
└── test

```

&#x20; 3\. Отобразите на экране текущий рабочий каталог, включая вложенные папки.

&#x20; 4\.  Найдите в древе все файлы, которые заканчиваются цифрой.&#x20;

&#x20; 5\. Удалите все древо каталогов с помощью одной команды.

## Краткие сведения

На этом уроке вы узнали:

* Как получить помощь
* Как использовать команду `man`
* Как перемещаться по `man` странице
* Различные разделы `man` страницы
* Как использовать команду `info`
* Как перемещаться между различными узлами
* Как выполнять поиск файлов в системе

Команды, используемые в упражнениях:

`man`

Отобразить справочную страницу.

`info`

Отобразить информационную страницу.

`locate`

Выполнить поиск в `locate` базе данных файлов с определенным именем.

`find`

Выполнить поиск в файловой системе имен, соответствующих набору критериев выбора.

`updatedb`

Обновить `locate` базу данных.

##

