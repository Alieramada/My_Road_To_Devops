# Урок 2.1.2.





## &#x20;**Введеине**



Все оболочки управляют набором информации о состоянии на протяжении сеансов оболочки. Эта информация может меняться в течение сеанса и влияет на поведение оболочки. Эти данные также используются программами для определения аспектов конфигурации системы. Большая часть этих данных хранится в так называемых _переменных_ , которые мы рассмотрим в этом уроке.

## &#x20;**Переменные**

**Переменные** — это части хранилища данных, таких как текст или числа. После установки значение переменной может быть доступно позднее. Переменные имеют имя, которое позволяет получить доступ к определенной переменной, даже если содержимое переменной изменилось. Они являются очень распространенным инструментом в большинстве языков программирования.

В большинстве оболочек Linux существует два типа переменных:

**Локальные переменные**

Эти переменные доступны только текущему процессу оболочки. Если вы создаете локальную переменную, а затем запускаете другую программу из этой оболочки, переменная больше не будет доступна этой программе. Поскольку они не наследуются подпроцессами, эти переменные называются _локальными переменными_ .

**Переменные среды**

Эти переменные доступны как в определенном сеансе оболочки, так и в подпроцессах, порожденных этим сеансом оболочки. Эти переменные могут использоваться для передачи данных конфигурации командам, которые запускаются. Поскольку эти программы могут получать доступ к этим переменным, они называются _переменными среды_ . Большинство переменных среды указаны заглавными буквами (например `PATH, DATE, USER)`. Набор переменных среды по умолчанию предоставляет, например, информацию о домашнем каталоге пользователя или типе терминала. Иногда полный набор всех переменных среды называется _средой_ .

{% hint style="info" %}
Переменные не являются постоянными. Когда оболочка, в которой они были установлены, закрывается, все переменные и их содержимое теряются. Большинство оболочек предоставляют файлы конфигурации, содержащие переменные, которые устанавливаются при каждом запуске новой оболочки. Переменные, которые должны быть установлены постоянно, должны быть добавлены в один из этих файлов конфигурации.
{% endhint %}

## &#x20;**Манипулирование переменными**

Как системному администратору, вам придется создавать, изменять или удалять как локальные переменные, так и переменные среды.

## &#x20;**Работа с локальными переменными**



Вы можете настроить локальную переменную, используя `=`оператор (равно). Простое присваивание создаст локальную переменную:

```
$ greeting=hello
```

{% hint style="info" %}
Не ставьте пробелы перед `=`оператором или после него.
{% endhint %}



Вы можете отобразить любую переменную с помощью `echo`команды. Команда обычно отображает текст в разделе аргументов:

```
$ echo greeting
greeting
```

Чтобы получить доступ к значению переменной, вам необходимо использовать `$`(знак доллара) перед именем переменной.

```
$ echo $greeting
hello
```

Как видно, переменная создана. Теперь откройте другую оболочку и попробуйте отобразить содержимое созданной переменной.

```
$ echo $greeting
```

Ничего не отображается. Это иллюстрирует, что переменные всегда существуют только в определенной оболочке.

Чтобы проверить, что переменная на самом деле является локальной, попробуйте создать новый процесс и проверить, может ли этот процесс получить доступ к переменной. Мы можем сделать это, запустив другую оболочку и позволив этой оболочке выполнить **echo** команду. Поскольку новая оболочка запускается в новом процессе, она не унаследует локальные переменные от своего родительского процесса:

```
$ echo $greeting world
hello world
$ bash -c 'echo $greeting world'
world

```

{% hint style="info" %}
Обязательно используйте одинарные кавычки в приведенном выше примере.
{% endhint %}

Чтобы удалить переменную, вам нужно будет использовать команду **`unset`**:

```
$ echo $greeting
hey
$ unset greeting
$ echo $greeting
```

{% hint style="info" %}
**`unset`**требует имя переменной в качестве аргумента. Поэтому вы не можете добавлять `$`к имени, так как это разрешит переменную и передаст значение переменной `unset`вместо имени переменной.
{% endhint %}

## &#x20;**Работа с глобальными переменными**

Чтобы сделать переменную доступной для подпроцессов, превратите ее из локальной в переменную окружения. Это делается командой **`export`**. При вызове с именем переменной эта переменная добавляется в окружение оболочки:

```
$ greeting=hello
$ export greeting
```

{% hint style="info" %}
Опять же, не используйте `$`при запуске **`export`**, так как вы хотите передать имя переменной вместо ее содержимого.
{% endhint %}

Более простой способ создания переменной среды — объединить оба вышеперечисленных метода, присвоив значение переменной в аргументной части команды.

```
$ export greeting=hey
```

Давайте еще раз проверим, доступна ли переменная подпроцессам:

```
$ export greeting=hey
$ echo $greeting world
hey world
$ bash -c 'echo $greeting world'
hey world
```

Другой способ использования переменных окружения — использовать их перед командами. Мы можем проверить это с помощью переменной окружения **`TZ`**, которая содержит часовой пояс. Эта переменная используется командой **`date`**для определения времени часового пояса, которое нужно отобразить:

```
$ TZ=EST date
Thu 31 Jan 10:07:35 EST 2019
$ TZ=GMT date
Thu 31 Jan 15:07:35 GMT 2019
```

Вы можете отобразить все переменные среды с помощью **`env`** команды.



